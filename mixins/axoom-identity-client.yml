feed_uri: http://assets.axoom.cloud/mixins/axoom-identity-client.xml
name: AXOOM Identity Client Mixin
summary: Adds config for clients of the Identity Server
description: 'This mixin adds config for clients of the Identity Server: Sets IDENTITY_SERVER_URI environment variable and enforces the export of IDENTITY_CLIENTS.'
homepage: https://tfs.inside-axoom.org/tfs/axoom/axoom/_git/Axoom.Platform.BaseAssets?_a=readme&fullScreen=true

mixin_parameters:
  - SERVICE_NAME
  - IDENTITY_CLIENT

external_environment:
  required:
    - PUBLIC_DOMAIN
  optional:
    - PUBLIC_PROTOCOL
    - PUBLIC_SUBDOMAIN_SEPARATOR

exported_environment:
  IDENTITY_CLIENTS: (IDENTITY_CLIENT)

compose:
  - version: '3.2'
    services:
      (SERVICE_NAME):
        environment:
          IDENTITY_SERVER_URI: ${PUBLIC_PROTOCOL-https}://identity${PUBLIC_SUBDOMAIN_SEPARATOR--}${PUBLIC_DOMAIN}
