feed_uri: http://assets.axoom.cloud/mixins/axoom-portal-app.xml
name: AXOOM Portal App Mixin
summary: single container for AXOOM Portal App
description: This mixin creates a single container for running an (usually ASP .NET Core-based) AXOOM Portal App. Injects the App's manifest into the Portal.
homepage: https://tfs.inside-axoom.org/tfs/axoom/axoom/_git/Axoom.Platform.BaseAssets?_a=readme&fullScreen=true

mixin_parameters:
  - APPKEY
  - PORTAL_APP
  - IDENTITY_CLIENT
  - DOCKER_REGISTRY
  - VERSION

mixins:
  - feed_uri: http://assets.axoom.cloud/mixins/axoom-portal-service.xml
    version: <VERSION> # Always released with in-sync versions
    parameters:
      SERVICE_NAME: (APPKEY)
      PORTAL_APP: (PORTAL_APP)
      DOCKER_REGISTRY: (DOCKER_REGISTRY)
      VERSION: (VERSION)
  - feed_uri: http://assets.axoom.cloud/mixins/axoom-identity-client.xml
    version: <VERSION> # Always released with in-sync versions
    parameters:
      SERVICE_NAME: (APPKEY)
      IDENTITY_CLIENT: (IDENTITY_CLIENT)

compose:
  - version: '3.2'
    services:
      (APPKEY):
        image: (DOCKER_REGISTRY)/apps/(APPKEY):(VERSION)
