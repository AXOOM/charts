feed_uri: http://assets.axoom.cloud/mixins/axoom-portal-app.xml
name: AXOOM Portal App Mixin
summary: single container for AXOOM Portal App
description: This mixin creates a single container for running an (usually ASP .NET Core-based) AXOOM Portal App. Injects the App's manifest into the Portal.

mixin_parameters:
  - APPKEY
  - PORTAL_APP
  - IDENTITY_CLIENTS
  - DOCKER_REGISTRY
  - VERSION

exported_environment:
  PORTAL_APPS: (PORTAL_APP)

dependencies:
  http://assets.axoom.cloud/apps/portal.xml:

mixins:
  - feed_uri: http://assets.axoom.cloud/mixins/axoom-service.xml
    version: <VERSION> # Always released with in-sync versions
    parameters:
      SERVICE_NAME: (APPKEY)
      IMAGE: (DOCKER_REGISTRY)/apps/(APPKEY):(VERSION)
  - feed_uri: http://assets.axoom.cloud/mixins/axoom-identity-client.xml
    version: <VERSION> # Always released with in-sync versions
    parameters:
      SERVICE_NAME: (APPKEY)
      IDENTITY_CLIENTS: (IDENTITY_CLIENTS)
  - feed_uri: http://assets.axoom.cloud/mixins/expose-public.xml
    version: <VERSION> # Always released with in-sync versions
    parameters:
      SERVICE_NAME: (APPKEY)

compose:
  - version: 3.2
