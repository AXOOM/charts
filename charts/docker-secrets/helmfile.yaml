releases:
  - name: '{{ requiredEnv "TENANT_ID" }}-docker-secrets'
    namespace: '{{ requiredEnv "TENANT_ID" }}'
    chart: ./

    values:
      - global:
          tenant:
            id: '{{ requiredEnv "TENANT_ID" }}'

        registries:
          - domain: 'docker.axoom.cloud'
            username: 'axoom'
            password: {{ requiredEnv "DOCKER_REGISTRY_PASSWORD" | quote }}
          - domain: 'docker-ci.axoom.cloud'
            username: 'axoom'
            password: {{ requiredEnv "DOCKER_REGISTRY_PASSWORD" | quote }}

        buckets:
          {{- if env "GCS_BACKUP_BUCKETNAME" }}
          - name: gcs-backup
            project: {{ env "GCP_BACKUP_PROJECT" | default "axoom-platform-backups" }}
            bucketname: {{ requiredEnv "GCS_BACKUP_BUCKETNAME" | quote }}
            value: {{ requiredEnv "GCS_BACKUP_KEYFILE" | quote }}
          {{- end }}
